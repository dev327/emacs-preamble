#+TITLE: Emacs' Preamble's Git Configuration

* Packages
  Enable some packages that will be required for this purpose.
  #+BEGIN_SRC emacs-lisp
    (preamble/require-packages '(
      git-blame              ;; emacs frontend for `git-blame' tool
      gitignore-mode         ;; major mode for gitignore
      gitconfig-mode         ;; major mode for gitconfig
      git-commit-mode        ;; major mode for git commit
      git-rebase-mode        ;; major mode for git rebase
      git-messenger          ;; display why a line was changed as per git commits
      git-gutter-fringe      ;; display git status of lines in gutter
      yagist                 ;; gist management
      github-browse-file     ;; view the file we're editing in Github
    ))
    (preamble/checkpoint "added git packages to myself")
  #+END_SRC

* Magit Configuration
  Now, all I need is to setup [[https://github.com/magit/magit][magit]] as I intend it to perform inside my workflow.
  #+BEGIN_SRC emacs-lisp
    (preamble/require-package 'magit)

    (setq-default
     magit-save-some-buffers nil
     magit-process-popup-time 10
     magit-diff-refine-hunk t
     magit-completing-read-function 'magit-ido-completing-read)

    (after 'magit
      ;; don't let magit-status mess up window configurations
      ;; http://whattheemacsd.com/setup-magit.el-01.html
      (defadvice magit-status (around magit-fullscreen activate)
        (window-configuration-to-register :magit-fullscreen)
        ad-do-it
        (delete-other-windows))

      (defadvice magit-quit-window (around magit-restore-screen activate)
        ad-do-it
        (jump-to-register :magit-fullscreen)))

    ;;; when we start working on git-backed files, use git-wip, if available
    (after 'vc-git
      (global-magit-wip-save-mode)
      (diminish 'magit-wip-save-mode))
  #+END_SRC
* Bug Reference from Github
  Automatically set `bug-reference-url-format` and enable `bug-reference-prog-mode` buffers from
  Github repositories.
  #+BEGIN_SRC emacs-lisp
    (preamble/require-package 'bug-reference-github)
    (after 'bug-reference-github
      (add-hook 'prog-mode-hook 'bug-reference-prog-mode))
  #+END_SRC
